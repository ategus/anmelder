
 <h1 class="text-center">Auto Save a Long Form!</h1>
    <div class="container col-md-6 col-md-offset-3">
        <form action="" method="POST" role="form" name="longForm">
            <legend>Field 1</legend>
            <div class="form-group">
                <label for="">label 1</label>
                <input type="text" class="form-control" id="fld1" name="fld1" placeholder="Input field 1">
            </div>
            <legend>Field 2</legend>
            <div class="form-group">
                <label for="">label 2</label>
                <input type="text" class="form-control" id="fld2" name="fld2" placeholder="Input field 2">
            </div>
            <br>
            <legend>And some more fields...</legend>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>

<script>
    $(document).ready(function() {

        var db = new Dexie('longForm');
        db.version(1).stores({
            mainForm: '++id'
        });
    
        db.open().then(function() {
            // populate form
            db.mainForm.toArray().then(function(fData) {
                fData = fData[0];
                $.each(fData, function(formEle, formEleVal) {
                    $('[name=' + formEle + ']').val(formEleVal);
                });
            });
    
        });
    
        // on blur of any form field, save the form data to indexedDB
        $('.form-control').on('blur', function() {
            // this can be cleaned up better to save 
            // only the relevant form data
            // I am saving the entire form data for simplicity
    
            // convert Form data to Object
            // http://stackoverflow.com/a/17784656/1015046
            var formObj = {};
            $('form').serializeArray().map(function(x) {
                formObj[x.name] = x.value;
            });
            // make sure that we save the form data only once
            db.mainForm.clear().then(function() {
                db.mainForm.put(formObj);
            });
    
        });
    
        // delete the db if the form is "successfully submit"
        $('form').submit(function(e) {
            e.preventDefault();
    
            // AJAX Call to server..
    
            // Success
            db.delete();
    
        });
    
    });
</script>